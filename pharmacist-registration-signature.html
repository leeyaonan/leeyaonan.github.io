<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¯å‰‚å¸ˆæ³¨å†Œä¸ç”µå­ç­¾åè®¾ç½®</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', Arial, sans-serif;
            background-color: #f5f5f5;
            color: #333;
        }
        
        .container {
            width: 100%;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        /* å¯¼èˆªæ  */
        .navbar {
            background-color: #001529;
            color: white;
            padding: 10px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .navbar-logo {
            font-size: 18px;
            font-weight: 600;
        }
        
        .navbar-menu {
            display: flex;
            gap: 20px;
        }
        
        .navbar-menu a {
            color: rgba(255,255,255,0.65);
            text-decoration: none;
            transition: all 0.3s;
        }
        
        .navbar-menu a:hover,
        .navbar-menu a.active {
            color: white;
        }
        
        /* ä¸»å†…å®¹åŒº */
        .content {
            flex: 1;
            padding: 30px;
            display: flex;
            justify-content: center;
        }
        
        .form-container {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.09);
            padding: 30px;
            width: 100%;
            max-width: 800px;
        }
        
        .form-header {
            margin-bottom: 30px;
            text-align: center;
        }
        
        .form-title {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        .form-subtitle {
            font-size: 14px;
            color: #666;
        }
        
        /* è¡¨å•æ ·å¼ */
        .form-step {
            display: none;
        }
        
        .form-step.active {
            display: block;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #d9d9d9;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #1890ff;
            box-shadow: 0 0 0 2px rgba(24, 144, 255, 0.2);
        }
        
        .form-row {
            display: flex;
            gap: 20px;
        }
        
        .form-row .form-group {
            flex: 1;
        }
        
        /* è¯ä»¶ä¸Šä¼  */
        .upload-section {
            border: 2px dashed #d9d9d9;
            border-radius: 4px;
            padding: 30px;
            text-align: center;
            margin-bottom: 20px;
        }
        
        .upload-section:hover {
            border-color: #1890ff;
        }
        
        .upload-icon {
            font-size: 48px;
            color: #d9d9d9;
            margin-bottom: 10px;
        }
        
        .upload-text {
            margin-bottom: 10px;
            color: #666;
        }
        
        .upload-hint {
            font-size: 12px;
            color: #999;
        }
        
        .upload-btn {
            margin-top: 10px;
        }
        
        .file-list {
            margin-top: 10px;
        }
        
        .file-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            border: 1px solid #e8e8e8;
            border-radius: 4px;
            margin-bottom: 10px;
        }
        
        .file-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .file-icon {
            font-size: 20px;
            color: #1890ff;
        }
        
        .file-name {
            font-size: 14px;
        }
        
        .file-size {
            font-size: 12px;
            color: #999;
        }
        
        .file-remove {
            color: #ff4d4f;
            cursor: pointer;
        }
        
        /* æ­¥éª¤æŒ‡ç¤ºå™¨ */
        .step-indicator {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
        }
        
        .step {
            flex: 1;
            text-align: center;
            position: relative;
        }
        
        .step::before {
            content: '';
            position: absolute;
            top: 15px;
            left: 0;
            right: 0;
            height: 2px;
            background-color: #e8e8e8;
            z-index: 1;
        }
        
        .step:first-child::before {
            left: 50%;
        }
        
        .step:last-child::before {
            right: 50%;
        }
        
        .step-number {
            position: relative;
            z-index: 2;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background-color: #e8e8e8;
            color: #999;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0 auto 10px;
            font-size: 14px;
            font-weight: 500;
        }
        
        .step.active .step-number {
            background-color: #1890ff;
            color: white;
        }
        
        .step.completed .step-number {
            background-color: #52c41a;
            color: white;
        }
        
        .step-title {
            font-size: 14px;
            color: #666;
        }
        
        .step.active .step-title,
        .step.completed .step-title {
            color: #333;
            font-weight: 500;
        }
        
        /* æŒ‰é’®æ ·å¼ */
        .btn {
            display: inline-block;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background-color: #1890ff;
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #40a9ff;
        }
        
        .btn-secondary {
            background-color: #f5f5f5;
            color: #333;
            border: 1px solid #d9d9d9;
        }
        
        .btn-secondary:hover {
            background-color: #e8e8e8;
        }
        
        .btn-success {
            background-color: #52c41a;
            color: white;
        }
        
        .btn-success:hover {
            background-color: #73d13d;
        }
        
        .btn-danger {
            background-color: #ff4d4f;
            color: white;
        }
        
        .btn-danger:hover {
            background-color: #ff7875;
        }
        
        .btn-block {
            width: 100%;
        }
        
        .btn-group {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            margin-top: 30px;
        }
        
        /* ç”µå­ç­¾åè®¾ç½® */
        .signature-section {
            margin-bottom: 30px;
        }
        
        .signature-preview {
            border: 1px solid #d9d9d9;
            border-radius: 4px;
            padding: 20px;
            min-height: 150px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .signature-placeholder {
            color: #999;
            text-align: center;
        }
        
        .signature-image {
            max-width: 100%;
            max-height: 150px;
        }
        
        .signature-actions {
            display: flex;
            gap: 10px;
        }
        
        .signature-draw {
            border: 1px solid #d9d9d9;
            border-radius: 4px;
            margin-bottom: 20px;
        }
        
        .draw-area {
            border: 1px solid #d9d9d9;
            border-radius: 4px;
            min-height: 200px;
            background-color: white;
        }
        
        .draw-controls {
            display: flex;
            gap: 10px;
            padding: 10px;
            background-color: #f5f5f5;
            border-top: 1px solid #d9d9d9;
        }
        
        .draw-color {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: 2px solid #d9d9d9;
            cursor: pointer;
        }
        
        .draw-color.black {
            background-color: black;
        }
        
        .draw-color.red {
            background-color: red;
        }
        
        .draw-color.blue {
            background-color: blue;
        }
        
        .draw-size {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .draw-size input {
            width: 100px;
        }
        
        /* æç¤ºä¿¡æ¯ */
        .info-box {
            background-color: #e6f7ff;
            border: 1px solid #91d5ff;
            border-radius: 4px;
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .info-box-title {
            font-weight: 500;
            margin-bottom: 10px;
            color: #1890ff;
        }
        
        .info-box-content {
            font-size: 14px;
            color: #333;
            line-height: 1.5;
        }
        
        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .form-row {
                flex-direction: column;
            }
            
            .btn-group {
                flex-direction: column;
            }
            
            .btn-group .btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- å¯¼èˆªæ  -->
        <nav class="navbar">
            <div class="navbar-logo">è¯å‰‚å¸ˆå®¡æ–¹å¹³å°</div>
            <div class="navbar-menu">
                <a href="#" class="active">æ³¨å†Œ</a>
                <a href="#">ç™»å½•</a>
                <a href="#">å¸®åŠ©</a>
            </div>
        </nav>
        
        <!-- ä¸»å†…å®¹åŒº -->
        <main class="content">
            <div class="form-container">
                <!-- æ³¨å†Œè¡¨å• -->
                <div id="registration-form">
                    <div class="form-header">
                        <h1 class="form-title">è¯å‰‚å¸ˆæ³¨å†Œ</h1>
                        <p class="form-subtitle">è¯·å¡«å†™ä»¥ä¸‹ä¿¡æ¯å®Œæˆæ³¨å†Œ</p>
                    </div>
                    
                    <!-- æ­¥éª¤æŒ‡ç¤ºå™¨ -->
                    <div class="step-indicator">
                        <div class="step active">
                            <div class="step-number">1</div>
                            <div class="step-title">åŸºæœ¬ä¿¡æ¯</div>
                        </div>
                        <div class="step">
                            <div class="step-number">2</div>
                            <div class="step-title">è¯ä»¶ä¸Šä¼ </div>
                        </div>
                        <div class="step">
                            <div class="step-number">3</div>
                            <div class="step-title">èº«ä»½è®¤è¯</div>
                        </div>
                        <div class="step">
                            <div class="step-number">4</div>
                            <div class="step-title">å®Œæˆæ³¨å†Œ</div>
                        </div>
                    </div>
                    
                    <!-- æ­¥éª¤1ï¼šåŸºæœ¬ä¿¡æ¯ -->
                    <div class="form-step active" id="step1">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="name">å§“å</label>
                                <input type="text" id="name" placeholder="è¯·è¾“å…¥çœŸå®å§“å">
                            </div>
                            <div class="form-group">
                                <label for="gender">æ€§åˆ«</label>
                                <select id="gender">
                                    <option value="">è¯·é€‰æ‹©</option>
                                    <option value="male">ç”·</option>
                                    <option value="female">å¥³</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="id-card">èº«ä»½è¯å·</label>
                                <input type="text" id="id-card" placeholder="è¯·è¾“å…¥èº«ä»½è¯å·">
                            </div>
                            <div class="form-group">
                                <label for="phone">è”ç³»ç”µè¯</label>
                                <input type="tel" id="phone" placeholder="è¯·è¾“å…¥æ‰‹æœºå·ç ">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="email">é‚®ç®±</label>
                            <input type="email" id="email" placeholder="è¯·è¾“å…¥é‚®ç®±åœ°å€">
                        </div>
                        
                        <div class="form-group">
                            <label for="institution">æ‰€å±æœºæ„</label>
                            <input type="text" id="institution" placeholder="è¯·è¾“å…¥æ‰€å±åŒ»ç–—æœºæ„">
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="license-number">æ‰§ä¸šè¯ä¹¦å·</label>
                                <input type="text" id="license-number" placeholder="è¯·è¾“å…¥æ‰§ä¸šè¯å¸ˆè¯ä¹¦å·">
                            </div>
                            <div class="form-group">
                                <label for="license-expiry">è¯ä¹¦æœ‰æ•ˆæœŸè‡³</label>
                                <input type="date" id="license-expiry">
                            </div>
                        </div>
                        
                        <div class="btn-group">
                            <button class="btn btn-primary" onclick="nextStep(1)">ä¸‹ä¸€æ­¥</button>
                        </div>
                    </div>
                    
                    <!-- æ­¥éª¤2ï¼šè¯ä»¶ä¸Šä¼  -->
                    <div class="form-step" id="step2">
                        <div class="info-box">
                            <div class="info-box-title">ä¸Šä¼ è¦æ±‚</div>
                            <div class="info-box-content">
                                <p>1. è¯·ä¸Šä¼ æ¸…æ™°çš„è¯ä»¶ç…§ç‰‡ï¼Œç¡®ä¿ä¿¡æ¯å®Œæ•´å¯è§</p>
                                <p>2. æ”¯æŒJPGã€PNGæ ¼å¼ï¼Œæ–‡ä»¶å¤§å°ä¸è¶…è¿‡5MB</p>
                                <p>3. è¯·ç¡®ä¿ä¸Šä¼ çš„è¯ä»¶åœ¨æœ‰æ•ˆæœŸå†…</p>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>èº«ä»½è¯æ­£é¢</label>
                            <div class="upload-section">
                                <div class="upload-icon">ğŸ“„</div>
                                <div class="upload-text">ç‚¹å‡»æˆ–æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„ä¸Šä¼ </div>
                                <div class="upload-hint">æ”¯æŒJPGã€PNGæ ¼å¼ï¼Œä¸è¶…è¿‡5MB</div>
                                <input type="file" style="display: none;" id="id-front" accept=".jpg,.jpeg,.png">
                                <button class="btn btn-primary upload-btn" onclick="document.getElementById('id-front').click()">é€‰æ‹©æ–‡ä»¶</button>
                            </div>
                            <div class="file-list" id="id-front-list"></div>
                        </div>
                        
                        <div class="form-group">
                            <label>èº«ä»½è¯åé¢</label>
                            <div class="upload-section">
                                <div class="upload-icon">ğŸ“„</div>
                                <div class="upload-text">ç‚¹å‡»æˆ–æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„ä¸Šä¼ </div>
                                <div class="upload-hint">æ”¯æŒJPGã€PNGæ ¼å¼ï¼Œä¸è¶…è¿‡5MB</div>
                                <input type="file" style="display: none;" id="id-back" accept=".jpg,.jpeg,.png">
                                <button class="btn btn-primary upload-btn" onclick="document.getElementById('id-back').click()">é€‰æ‹©æ–‡ä»¶</button>
                            </div>
                            <div class="file-list" id="id-back-list"></div>
                        </div>
                        
                        <div class="form-group">
                            <label>æ‰§ä¸šè¯å¸ˆè¯ä¹¦</label>
                            <div class="upload-section">
                                <div class="upload-icon">ğŸ“„</div>
                                <div class="upload-text">ç‚¹å‡»æˆ–æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„ä¸Šä¼ </div>
                                <div class="upload-hint">æ”¯æŒJPGã€PNGæ ¼å¼ï¼Œä¸è¶…è¿‡5MB</div>
                                <input type="file" style="display: none;" id="license" accept=".jpg,.jpeg,.png">
                                <button class="btn btn-primary upload-btn" onclick="document.getElementById('license').click()">é€‰æ‹©æ–‡ä»¶</button>
                            </div>
                            <div class="file-list" id="license-list"></div>
                        </div>
                        
                        <div class="form-group">
                            <label>è¿‘æœŸå…å† ç…§ç‰‡</label>
                            <div class="upload-section">
                                <div class="upload-icon">ğŸ“„</div>
                                <div class="upload-text">ç‚¹å‡»æˆ–æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„ä¸Šä¼ </div>
                                <div class="upload-hint">æ”¯æŒJPGã€PNGæ ¼å¼ï¼Œä¸è¶…è¿‡5MB</div>
                                <input type="file" style="display: none;" id="photo" accept=".jpg,.jpeg,.png">
                                <button class="btn btn-primary upload-btn" onclick="document.getElementById('photo').click()">é€‰æ‹©æ–‡ä»¶</button>
                            </div>
                            <div class="file-list" id="photo-list"></div>
                        </div>
                        
                        <div class="btn-group">
                            <button class="btn btn-secondary" onclick="prevStep(2)">ä¸Šä¸€æ­¥</button>
                            <button class="btn btn-primary" onclick="nextStep(2)">ä¸‹ä¸€æ­¥</button>
                        </div>
                    </div>
                    
                    <!-- æ­¥éª¤3ï¼šèº«ä»½è®¤è¯ -->
                    <div class="form-step" id="step3">
                        <div class="info-box">
                            <div class="info-box-title">èº«ä»½è®¤è¯</div>
                            <div class="info-box-content">
                                <p>è¯·å®Œæˆäººè„¸è¯†åˆ«éªŒè¯ï¼Œç¡®ä¿æ˜¯æœ¬äººæ“ä½œ</p>
                            </div>
                        </div>
                        
                        <div class="upload-section">
                            <h3>äººè„¸è¯†åˆ«éªŒè¯</h3>
                            <p>è¯·å°†é¢éƒ¨ç½®äºæ‘„åƒå¤´å‰è¿›è¡Œè¯†åˆ«</p>
                            <div style="margin: 20px 0;">
                                <video id="video" width="320" height="240" autoplay></video>
                                <canvas id="canvas" style="display: none;"></canvas>
                            </div>
                            <button class="btn btn-primary" onclick="startFaceRecognition()">å¼€å§‹è¯†åˆ«</button>
                        </div>
                        
                        <div class="info-box" style="margin-top: 20px;">
                            <div class="info-box-title">æ— æ³•ä½¿ç”¨æ‘„åƒå¤´ï¼Ÿ</div>
                            <div class="info-box-content">
                                <p>å¦‚æœæ‚¨çš„è®¾å¤‡æ²¡æœ‰æ‘„åƒå¤´ï¼Œå¯ä»¥ä½¿ç”¨æ‰‹æœºæ‰«ç å®Œæˆè®¤è¯</p>
                                <div style="text-align: center; margin: 20px 0;">
                                    <div style="display: inline-block; padding: 20px; background-color: white; border: 1px solid #d9d9d9; border-radius: 4px;">
                                        <div style="font-size: 12px; margin-bottom: 10px;">è¯·ä½¿ç”¨åŒ»é™¢APPæ‰«ç </div>
                                        <div style="width: 200px; height: 200px; background-color: #f5f5f5; display: flex; justify-content: center; align-items: center;">
                                            <span>äºŒç»´ç </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="btn-group">
                            <button class="btn btn-secondary" onclick="prevStep(3)">ä¸Šä¸€æ­¥</button>
                            <button class="btn btn-primary" onclick="nextStep(3)">ä¸‹ä¸€æ­¥</button>
                        </div>
                    </div>
                    
                    <!-- æ­¥éª¤4ï¼šå®Œæˆæ³¨å†Œ -->
                    <div class="form-step" id="step4">
                        <div class="info-box">
                            <div class="info-box-title">æ³¨å†Œå®Œæˆ</div>
                            <div class="info-box-content">
                                <p>æ‚¨çš„æ³¨å†Œä¿¡æ¯å·²æäº¤æˆåŠŸï¼Œæˆ‘ä»¬å°†åœ¨1-3ä¸ªå·¥ä½œæ—¥å†…å®¡æ ¸æ‚¨çš„èµ„æ–™</p>
                                <p>å®¡æ ¸é€šè¿‡åï¼Œæ‚¨å°†æ”¶åˆ°çŸ­ä¿¡é€šçŸ¥ï¼Œå±Šæ—¶å¯ä»¥ç™»å½•ç³»ç»Ÿ</p>
                            </div>
                        </div>
                        
                        <div style="text-align: center; margin: 40px 0;">
                            <div style="font-size: 48px; margin-bottom: 20px;">âœ…</div>
                            <h3>æ³¨å†Œæäº¤æˆåŠŸ</h3>
                            <p style="color: #666; margin-top: 10px;">æ‚¨çš„ç”³è¯·æ­£åœ¨å®¡æ ¸ä¸­ï¼Œè¯·è€å¿ƒç­‰å¾…</p>
                        </div>
                        
                        <div class="btn-group">
                            <button class="btn btn-primary btn-block" onclick="window.location.href='#'">è¿”å›ç™»å½•</button>
                        </div>
                    </div>
                </div>
                
                <!-- ç”µå­ç­¾åè®¾ç½® -->
                <div id="signature-setting" style="display: none;">
                    <div class="form-header">
                        <h1 class="form-title">ç”µå­ç­¾åè®¾ç½®</h1>
                        <p class="form-subtitle">è¯·è®¾ç½®æ‚¨çš„ç”µå­ç­¾åï¼Œç”¨äºå¤„æ–¹å®¡æ ¸</p>
                    </div>
                    
                    <div class="info-box">
                        <div class="info-box-title">ç”µå­ç­¾åè¯´æ˜</div>
                        <div class="info-box-content">
                            <p>1. ç”µå­ç­¾åå°†ç”¨äºå¤„æ–¹å®¡æ ¸é€šè¿‡åçš„ç­¾ç« </p>
                            <p>2. è¯·ç¡®ä¿ç­¾åæ¸…æ™°å¯è¾¨ï¼Œä»£è¡¨æ‚¨çš„çœŸå®èº«ä»½</p>
                            <p>3. ç­¾åä¸€æ—¦è®¾ç½®ï¼Œå¦‚éœ€ä¿®æ”¹éœ€è¦é‡æ–°å®¡æ ¸</p>
                        </div>
                    </div>
                    
                    <div class="signature-section">
                        <h3>ç­¾åé¢„è§ˆ</h3>
                        <div class="signature-preview" id="signature-preview">
                            <div class="signature-placeholder">
                                <div style="font-size: 32px; margin-bottom: 10px;">ğŸ“</div>
                                <div>è¯·ä¸Šä¼ æˆ–ç»˜åˆ¶æ‚¨çš„ç­¾å</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <h3>ä¸Šä¼ ç­¾å</h3>
                        <div class="upload-section">
                            <div class="upload-icon">ğŸ“„</div>
                            <div class="upload-text">ç‚¹å‡»æˆ–æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„ä¸Šä¼ </div>
                            <div class="upload-hint">æ”¯æŒJPGã€PNGæ ¼å¼ï¼Œä¸è¶…è¿‡2MB</div>
                            <input type="file" style="display: none;" id="signature-upload" accept=".jpg,.jpeg,.png">
                            <button class="btn btn-primary upload-btn" onclick="document.getElementById('signature-upload').click()">é€‰æ‹©æ–‡ä»¶</button>
                        </div>
                        <div class="file-list" id="signature-list"></div>
                    </div>
                    
                    <div class="form-group">
                        <h3>ç»˜åˆ¶ç­¾å</h3>
                        <div class="signature-draw">
                            <div class="draw-area" id="draw-area"></div>
                            <div class="draw-controls">
                                <div>
                                    <span>é¢œè‰²ï¼š</span>
                                    <div class="draw-color black active" data-color="black"></div>
                                    <div class="draw-color red" data-color="red"></div>
                                    <div class="draw-color blue" data-color="blue"></div>
                                </div>
                                <div class="draw-size">
                                    <span>ç²—ç»†ï¼š</span>
                                    <input type="range" min="1" max="10" value="2" id="draw-size">
                                </div>
                                <button class="btn btn-secondary" onclick="clearSignature()">æ¸…ç©º</button>
                                <button class="btn btn-primary" onclick="saveSignature()">ä¿å­˜</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="btn-group">
                        <button class="btn btn-secondary" onclick="window.location.href='#'">å–æ¶ˆ</button>
                        <button class="btn btn-success" onclick="submitSignature()">æäº¤ç­¾å</button>
                    </div>
                </div>
            </div>
        </main>
    </div>
    
    <script>
        // æ­¥éª¤å¯¼èˆª
        function nextStep(currentStep) {
            document.getElementById('step' + currentStep).classList.remove('active');
            document.getElementById('step' + (currentStep + 1)).classList.add('active');
            
            // æ›´æ–°æ­¥éª¤æŒ‡ç¤ºå™¨
            const steps = document.querySelectorAll('.step');
            steps[currentStep - 1].classList.remove('active');
            steps[currentStep - 1].classList.add('completed');
            steps[currentStep].classList.add('active');
        }
        
        function prevStep(currentStep) {
            document.getElementById('step' + currentStep).classList.remove('active');
            document.getElementById('step' + (currentStep - 1)).classList.add('active');
            
            // æ›´æ–°æ­¥éª¤æŒ‡ç¤ºå™¨
            const steps = document.querySelectorAll('.step');
            steps[currentStep - 1].classList.remove('active');
            steps[currentStep - 2].classList.remove('completed');
            steps[currentStep - 2].classList.add('active');
        }
        
        // æ–‡ä»¶ä¸Šä¼ å¤„ç†
        function handleFileUpload(inputId, listId) {
            const input = document.getElementById(inputId);
            const list = document.getElementById(listId);
            
            input.addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (file) {
                    const fileSize = (file.size / 1024 / 1024).toFixed(2);
                    if (fileSize > 5) {
                        alert('æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡5MB');
                        return;
                    }
                    
                    list.innerHTML = `
                        <div class="file-item">
                            <div class="file-info">
                                <div class="file-icon">ğŸ“„</div>
                                <div>
                                    <div class="file-name">${file.name}</div>
                                    <div class="file-size">${fileSize} MB</div>
                                </div>
                            </div>
                            <div class="file-remove" onclick="removeFile('${inputId}', '${listId}')">åˆ é™¤</div>
                        </div>
                    `;
                }
            });
        }
        
        // ç§»é™¤æ–‡ä»¶
        function removeFile(inputId, listId) {
            document.getElementById(inputId).value = '';
            document.getElementById(listId).innerHTML = '';
        }
        
        // åˆå§‹åŒ–æ–‡ä»¶ä¸Šä¼ 
        handleFileUpload('id-front', 'id-front-list');
        handleFileUpload('id-back', 'id-back-list');
        handleFileUpload('license', 'license-list');
        handleFileUpload('photo', 'photo-list');
        handleFileUpload('signature-upload', 'signature-list');
        
        // äººè„¸è¯†åˆ«
        function startFaceRecognition() {
            alert('å¼€å§‹äººè„¸è¯†åˆ«...');
            // æ¨¡æ‹Ÿäººè„¸è¯†åˆ«æˆåŠŸ
            setTimeout(() => {
                alert('äººè„¸è¯†åˆ«æˆåŠŸï¼');
            }, 2000);
        }
        
        // ç”µå­ç­¾åç»˜åˆ¶
        let canvas, ctx, isDrawing = false, lastX = 0, lastY = 0;
        let currentColor = 'black', currentSize = 2;
        
        function initDrawArea() {
            const drawArea = document.getElementById('draw-area');
            canvas = document.createElement('canvas');
            canvas.width = drawArea.offsetWidth;
            canvas.height = 200;
            drawArea.appendChild(canvas);
            
            ctx = canvas.getContext('2d');
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';
            
            // äº‹ä»¶ç›‘å¬
            canvas.addEventListener('mousedown', startDrawing);
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('mouseup', stopDrawing);
            canvas.addEventListener('mouseout', stopDrawing);
            
            // è§¦æ‘¸æ”¯æŒ
            canvas.addEventListener('touchstart', startDrawing);
            canvas.addEventListener('touchmove', draw);
            canvas.addEventListener('touchend', stopDrawing);
        }
        
        function startDrawing(e) {
            isDrawing = true;
            const rect = canvas.getBoundingClientRect();
            if (e.type === 'touchstart') {
                lastX = e.touches[0].clientX - rect.left;
                lastY = e.touches[0].clientY - rect.top;
            } else {
                lastX = e.clientX - rect.left;
                lastY = e.clientY - rect.top;
            }
        }
        
        function draw(e) {
            if (!isDrawing) return;
            const rect = canvas.getBoundingClientRect();
            let currentX, currentY;
            
            if (e.type === 'touchmove') {
                currentX = e.touches[0].clientX - rect.left;
                currentY = e.touches[0].clientY - rect.top;
            } else {
                currentX = e.clientX - rect.left;
                currentY = e.clientY - rect.top;
            }
            
            ctx.beginPath();
            ctx.moveTo(lastX, lastY);
            ctx.lineTo(currentX, currentY);
            ctx.strokeStyle = currentColor;
            ctx.lineWidth = currentSize;
            ctx.stroke();
            
            lastX = currentX;
            lastY = currentY;
        }
        
        function stopDrawing() {
            isDrawing = false;
        }
        
        function clearSignature() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }
        
        function saveSignature() {
            const signatureData = canvas.toDataURL('image/png');
            document.getElementById('signature-preview').innerHTML = `<img src="${signatureData}" class="signature-image">`;
            alert('ç­¾åå·²ä¿å­˜ï¼');
        }
        
        function submitSignature() {
            alert('ç”µå­ç­¾åå·²æäº¤ï¼Œç­‰å¾…å®¡æ ¸é€šè¿‡åå³å¯ä½¿ç”¨ï¼');
        }
        
        // é¢œè‰²é€‰æ‹©
        document.querySelectorAll('.draw-color').forEach(color => {
            color.addEventListener('click', function() {
                document.querySelectorAll('.draw-color').forEach(c => c.classList.remove('active'));
                this.classList.add('active');
                currentColor = this.dataset.color;
            });
        });
        
        // ç²—ç»†è°ƒæ•´
        document.getElementById('draw-size').addEventListener('input', function() {
            currentSize = this.value;
        });
        
        // åˆå§‹åŒ–ç»˜åˆ¶åŒºåŸŸ
        window.onload = function() {
            initDrawArea();
        };
        
        // åˆ‡æ¢åˆ°ç”µå­ç­¾åè®¾ç½®
        function goToSignatureSetting() {
            document.getElementById('registration-form').style.display = 'none';
            document.getElementById('signature-setting').style.display = 'block';
        }
    </script>
</body>
</html>